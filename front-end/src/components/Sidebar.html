<!-- Mobile Header (Visible only on mobile via CSS) -->
<header class="mobile-header">
  <div class="mobile-header-logo" data-action="go-home" style="cursor: pointer;">
    <img src="../assets/logo-dark.svg" alt="AlphaTask" class="mobile-logo mobile-logo-light">
    <img src="../assets/logo-white.svg" alt="AlphaTask" class="mobile-logo mobile-logo-dark">
  </div>
  <div class="mobile-header-actions">
    <button class="mobile-notification-btn" id="mobileNotificationToggle" aria-label="Notificações">
      <span class="material-icons-outlined">notifications</span>
      <span class="notification-badge" id="mobileNotificationBadge" style="display: none;">0</span>
    </button>
    <button class="mobile-menu-btn" id="sidebarToggle" aria-label="Abrir menu">
      <span class="material-icons-outlined">menu</span>
    </button>
  </div>
</header>

<!-- Sidebar Container -->
<aside class="sidebar" id="sidebar">
  <!-- Header com Logo -->
  <div class="sidebar-header" data-action="go-home" style="cursor: pointer;">
    <img src="../assets/logo-dark.svg" alt="AlphaTask" class="sidebar-logo sidebar-logo-light">
    <img src="../assets/logo-white.svg" alt="AlphaTask" class="sidebar-logo sidebar-logo-dark">
  </div>

  <!-- Navigation Menu -->
  <nav class="sidebar-nav">
    <!-- Dashboard -->
    <a href="#" class="sidebar-item" data-action="menu-item" data-route="">
      <span class="material-icons-outlined sidebar-icon">dashboard</span>
      <span class="sidebar-text">Dashboard</span>
    </a>

    <!-- Minhas Tarefas -->
    <a href="#" class="sidebar-item" data-action="menu-item" data-route="minhas-tarefas">
      <span class="material-icons-outlined sidebar-icon">task</span>
      <span class="sidebar-text">Minhas Tarefas</span>
    </a>

    <!-- Projetos (Colapsável) -->
    <div class="sidebar-projects">
      <a href="#" class="sidebar-item" data-action="toggle-projects" data-route="projetos">
        <span class="material-icons-outlined sidebar-icon">folder</span>
        <span class="sidebar-text">Projetos</span>
        <div class="sidebar-chevron-container">
          <span class="material-icons-outlined sidebar-chevron">expand_more</span>
        </div>
      </a>
      <div class="sidebar-projects-list" id="projects-list" style="display: none;">
        <!-- Projetos do usuário serão renderizados aqui via TypeScript -->
      </div>
    </div>

    <!-- Notificações -->
    <a href="#" class="sidebar-item" data-action="menu-item" data-route="notificacoes">
      <span class="material-icons-outlined sidebar-icon">notifications</span>
      <span class="sidebar-text">Notificações</span>
      <span class="sidebar-notification-badge" id="sidebarNotificationBadge" style="display: none;">0</span>
    </a>

    <!-- Usuários (só visible se admin) -->
    <a href="#" class="sidebar-item" data-action="menu-item" data-route="usuarios">
      <span class="material-icons-outlined sidebar-icon">group</span>
      <span class="sidebar-text">Usuários</span>
    </a>
  </nav>

  <!-- Footer com Usuário e Controles -->
  <div class="sidebar-footer">

    <!-- Perfil do Usuário -->
    <div class="sidebar-profile" data-action="goto-profile" title="Meu Perfil">
      <!-- Avatar (Inicial) -->
      <div class="sidebar-avatar" id="user-avatar">
        <span data-bind="user-initial">U</span>
      </div>

      <!-- Info e Ações -->
      <div class="sidebar-profile-info">
        <span class="sidebar-user-name" data-bind="user-name">Carregando...</span>
        <span class="sidebar-user-email" data-bind="user-email">...</span>
      </div>
    </div>

    <!-- Controles (Notificações + Dark Mode + Logout) -->
    <div class="sidebar-controls">
      <button class="sidebar-btn-icon sidebar-notification-btn" id="notificationToggle" aria-label="Notificações"
        title="Notificações">
        <span class="material-icons-outlined">notifications</span>
        <span class="notification-badge" id="notificationBadge" style="display: none;">0</span>
      </button>
      <button class="sidebar-btn-icon" data-action="toggle-dark-mode" aria-label="Alternar modo escuro" title="Tema">
        <span class="material-icons-outlined">dark_mode</span>
      </button>
      <button class="sidebar-btn-icon sidebar-btn-logout" data-action="logout" aria-label="Sair" title="Sair">
        <span class="material-icons-outlined">logout</span>
      </button>
    </div>

  </div>
</aside>

<!-- Notification Popup Container -->
<div id="notification-popup-container"></div>

<!-- Overlay para Mobile -->
<div class="sidebar-overlay" id="sidebarOverlay"></div>